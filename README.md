# draw_ROIs
 Matlab app for manually drawing ROIs and extracting fluorescence traces from scanimage .tif files

ROIs (Regions Of Interest) are commonly used to identify spatial subsets of an image series in order to calculate how the mean brightness of that region changes as a function of time throughtout the image series. This app simplifies the process identifying useful ROIs in an image series and easily drawing polygons around them such as with a mouse, touchpad, or touchscreen.

The app can either be run directly or called as a function from matlab. When ran directly or called as a function with no inputs (e.g. "draw_ROIs()"), the "draw_ROIs" app will open with only the "Load Image Series" button visible, prompting the user to select an image file located in their file system for drawing ROIs over. Alternatively, an image file can be passed into the app as an input, bypassing the need for the user to select a file after the app has loaded. An image file can be passed into the function as either an image matrix already loaded in the matlab workspace (e.g. "draw_ROIs(image_series)") or as a file directory pointing to a .tif image file (e.g. "draw_ROIs('C:/image.tif')").

When loading an image file from a directory, the app will attempt to read the framerate that the image series was acquired; while not necessary for the app to function, the framerate can be useful in plotting the time-course of the ROI brightness changes afterwards. If the app is unable to find the framerate information from the Tiff file metadata, a dialog box will open asking the user to input the framerate directly.

After an image series is loaded, a mean projection of the image will be displayed in the primary axis of the app. Additionally, a dropdown box above the image will let the user select between a mean projection of the image or a "mean + variance" projection, with the brightness variance of the image displayed in red. This option may be useful in finding ROIs with highly fluctuating brightness values.

To begin drawing ROIs using the image projection as a guide, clicking the "add ROI" button will open a separate window prompting the user to draw a polygon around the desired ROI. Vertices of the polygon can be set by single left-clicks around the ROI; after placing a number of vertices, the ROI polygon can be enclosed/finalized by double-clicking the starting vertex. 

After all desired ROIs have been drawn, clicking the "Save and Exit" button will save two matlab .mat files in the same directory as the image file. The first .mat file begins with "rois" contains the ROI polygon vertex coordinates as well as binary image masks of all drawn ROIs -- this file can be re-loaded back into the app for later visualization/editing/etc. The 2nd .mat file contains the mean brightness value time-courses of all drawn ROIs, using the binary image masks described by the drawn ROIs. Additionally, image files (either .png, .svg, or both) can be optionally saved which display the ROIs drawn on top of the mean projection.
